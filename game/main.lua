local puzzle_cube_tex = texture.load("textures/puzzle_cube.png")

local mat = material.default()
mat:addTexture("tex0", puzzle_cube_tex)

local tri = mesh.create(mat)
tri:setVertexFormat({
  {type="float", components=3}, -- position
  {type="float", components=2}, -- uv
  {type="float", components=4}, -- color
})
tri:setVertices({
-- position           uv
  {-0.5, -0.5, -0.5,  0.0, 0.0,  1, 0.5, 0, 1}, -- orange
  { 0.5, -0.5, -0.5,  1.0, 0.0,  1, 0.5, 0, 1},
  { 0.5,  0.5, -0.5,  1.0, 1.0,  1, 0.5, 0, 1},
  { 0.5,  0.5, -0.5,  1.0, 1.0,  1, 0.5, 0, 1},
  {-0.5,  0.5, -0.5,  0.0, 1.0,  1, 0.5, 0, 1},
  {-0.5, -0.5, -0.5,  0.0, 0.0,  1, 0.5, 0, 1},

  {-0.5, -0.5,  0.5,  0.0, 0.0,  1, 0, 0, 1}, -- red
  { 0.5, -0.5,  0.5,  1.0, 0.0,  1, 0, 0, 1},
  { 0.5,  0.5,  0.5,  1.0, 1.0,  1, 0, 0, 1},
  { 0.5,  0.5,  0.5,  1.0, 1.0,  1, 0, 0, 1},
  {-0.5,  0.5,  0.5,  0.0, 1.0,  1, 0, 0, 1},
  {-0.5, -0.5,  0.5,  0.0, 0.0,  1, 0, 0, 1},

  {-0.5,  0.5,  0.5,  1.0, 0.0,  0, 1, 0, 1}, -- green
  {-0.5,  0.5, -0.5,  1.0, 1.0,  0, 1, 0, 1},
  {-0.5, -0.5, -0.5,  0.0, 1.0,  0, 1, 0, 1},
  {-0.5, -0.5, -0.5,  0.0, 1.0,  0, 1, 0, 1},
  {-0.5, -0.5,  0.5,  0.0, 0.0,  0, 1, 0, 1},
  {-0.5,  0.5,  0.5,  1.0, 0.0,  0, 1, 0, 1},

  { 0.5,  0.5,  0.5,  1.0, 0.0,  0, 0, 1, 1}, -- blue
  { 0.5,  0.5, -0.5,  1.0, 1.0,  0, 0, 1, 1},
  { 0.5, -0.5, -0.5,  0.0, 1.0,  0, 0, 1, 1},
  { 0.5, -0.5, -0.5,  0.0, 1.0,  0, 0, 1, 1},
  { 0.5, -0.5,  0.5,  0.0, 0.0,  0, 0, 1, 1},
  { 0.5,  0.5,  0.5,  1.0, 0.0,  0, 0, 1, 1},

  {-0.5, -0.5, -0.5,  0.0, 1.0,  1, 1, 0, 1}, -- yellow
  { 0.5, -0.5, -0.5,  1.0, 1.0,  1, 1, 0, 1},
  { 0.5, -0.5,  0.5,  1.0, 0.0,  1, 1, 0, 1},
  { 0.5, -0.5,  0.5,  1.0, 0.0,  1, 1, 0, 1},
  {-0.5, -0.5,  0.5,  0.0, 0.0,  1, 1, 0, 1},
  {-0.5, -0.5, -0.5,  0.0, 1.0,  1, 1, 0, 1},

  {-0.5,  0.5, -0.5,  0.0, 1.0,  1, 1, 1, 1}, -- white
  { 0.5,  0.5, -0.5,  1.0, 1.0,  1, 1, 1, 1},
  { 0.5,  0.5,  0.5,  1.0, 0.0,  1, 1, 1, 1},
  { 0.5,  0.5,  0.5,  1.0, 0.0,  1, 1, 1, 1},
  {-0.5,  0.5,  0.5,  0.0, 0.0,  1, 1, 1, 1},
  {-0.5,  0.5, -0.5,  0.0, 1.0,  1, 1, 1, 1}
})
tri:finalize(true)

function update(_)
  if input.isKeyDown(Key.escape) then
    window.close()
  end
end

function draw()
  tri:draw(0, 0, -2, time.getTotalTime() * 0.25, time.getTotalTime(), 0)
end
